<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: WeekInReview | Seshbot Programs]]></title>
  <link href="http://seshbot.com/blog/categories/weekinreview/atom.xml" rel="self"/>
  <link href="http://seshbot.com/"/>
  <updated>2014-06-16T02:13:45+00:00</updated>
  <id>http://seshbot.com/</id>
  <author>
    <name><![CDATA[Paul Cechner]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Week in Review: Running in an infinite world]]></title>
    <link href="http://seshbot.com/blog/2014/05/31/week-in-review-running-in-an-infinite-world/"/>
    <updated>2014-05-31T11:24:19+00:00</updated>
    <id>http://seshbot.com/blog/2014/05/31/week-in-review-running-in-an-infinite-world</id>
    <content type="html"><![CDATA[<p>Here&rsquo;s a quick snap of the 2D SFML client alongside a new OpenGL client:
<img src="/images/upload/2014-05-31-compare.png" title="&ldquo;SFML client alongside OpenGL client with QML overlays&rdquo;" ></p>

<p>OK I could have spent a bit longer on the screenshot &ndash; I haven&rsquo;t made any models yet other than cubes, and I&rsquo;m not using any textures, and I should have adjusted the angle and colour of the directional light to make it look like evening or morning or something, to show off some of the immediate benefits of going to 3D.</p>

<p>I did spend some time making the camera zoom in from a map-like view to a chase-cam view:
<img src="/images/upload/2014-05-31-zoomed.png" title="&ldquo;The camera is tethered to the player character&rdquo;" ></p>

<p>In general however I&rsquo;m hoping to ramp-down on the OpenGL stuff and go back to working on the core functionality. The last week was actually pretty productive:
<img src="/images/upload/2014-05-31-bugfixes.png" title="&ldquo;Most recent git checkins&rdquo;" ></p>

<p>Also I&rsquo;ve been spending a fair amount of time in <a href="http://picopicocafe.com">PicoPico Cafe</a> when it&rsquo;s open, and I&rsquo;m guessing I&rsquo;ll be spending more time there in the coming weeks as a bunch of construction is scheduled outside my house during business hours when nobody is supposed to be home.</p>

<!-- more -->


<h2>World Building</h2>

<p>The 3D functionality in my game so far is provided by a thin layer that invokes the exact same service layer (game, player, mobile and prop unit services) used by the 2D client. I took the time to finally make some extensive refactorings that I&rsquo;ve been planning for some time:</p>

<h4>Infinte Terrain!</h4>

<p>The terrain now runs effectively infinitely, in that it can cache any combination of arbitrary regions. The complicating factor was the fact that I want the regions to be stored in a sensible way that provides for really fast lookups many times per second as entities roam around the countryside, even outside of the player&rsquo;s view. More work needs to be done on this to unload cached regions that are no longer relevant.</p>

<h4>Infinte Entities!</h4>

<p>The entity service, responsible for facilitating rapid interactions with many geographically-local entities, can now scale out exponentially more efficiently than before. Entity &lsquo;moment&rsquo; information is stored contiguously in memory for super cache friendly iteration. Unfortunately this encourages the programmer to pre-allocate large portions of memory to allow the number of entities to fluctuate without large re-allocations.</p>

<p>Because of this obsession with data locality, every region was previously allocating enough space for all entities in the game to coexist at once so I could trivially say <code>auto moment = entities_[entityId].moment;</code> (or something kinda like that.) Now I changed it so there is a single ledger shared outside the specific regions with lookup instructions for each entity indicating that entity&rsquo;s region and index within that region. This means that the regions can be much smaller, reducing the region-to-memory relationship from exponential to linear, which is HUGE. (Of course, the old scheme was never meant to stay in there.)</p>

<p>I now have 1,000,000 entities pre-allocated without straining memory or computational resources at all (about 100MB memory for the whole app) whereas before I was settling for about 10,000 lest I run into gigabytes for a game with a relatively small number of regions.</p>

<h4>Lots more stuff of course</h4>

<p>I also made an interesting change to the core &lsquo;entity moment&rsquo; structure so it includes a &lsquo;facing direction&rsquo; as well as the existing velocity vector that indicates which direction and at what speed the entity is moving. I was having trouble determining the direction an entity should face when it is not moving (the velocity is 0,0 so has no implicit direction.) This wasnt a problem when I was rendering all entities as circles.</p>

<h2>Back to OpenGL 2 again</h2>

<p>The more I learn about the troubles people have with OpenGL the more concerned I became about getting my app to work on Windows. Through a fine bit of serendipity I met the always helpful <a href="http://greggman.com/">Greggman</a> at PicoPico, who was one of the devs who implemented WebGL in Google Chrome. He gave me some great advice that lined up with a few things I&rsquo;d found on the internet and convinced me to move to OpenGL ES 2.0.</p>

<p>As I mentioned last week OpenGL support in Windows is lacking due to MS pushing their own DirectX 3D stack. But fortunately Google have written a library called <a href="https://code.google.com/p/angleproject/">ANGLE</a> that is a &lsquo;conformant implementation of the OpenGL ES 2.0 specification that is hardware‚Äêaccelerated via Direct3D.&rsquo; This means that if you write conformant OpenGL ES 2.0 code you get DirectX compliance for free (at least that is the idea.)</p>

<p>Another advantage of OpenGL ES (other than the widespread support, including on mobile devices) is that it is much more stringently standardised. Apparently standard OpenGL does not come with conformance tests of any kind, so vendors don&rsquo;t have a mechanical way of verifying that they have implemented conformant drivers. ES does have such tests however so anecdotally provides a much cleaner integration experience.</p>

<p>Of course I&rsquo;m effectively going back to OpenGL 2 syntax and functionality which is a bit of a drag, but I wasn&rsquo;t really using geometry shaders or complex alternative rendering pipelines anyway.</p>

<h2>Object Picking with the mouse</h2>

<p>If someone clicks on a pixel on the screen (in pixel coordinates), how do you discover which object they were clicking on? This is deceptively difficult! The old way of doing it involved using a special part of OpenGL called <em>selection buffers</em> that allows you to assign a name to each entity being rendered, and query a pixel for the name of the entity rendered therein. That is deprecated however.</p>

<p>The modern analog of this is a manual process called <em>colour picking</em>, which involves rendering identifying values instead of colours to a special buffer that is not rendered. This image can be queried via <code>glReadPixels()</code>, the returned result is the identifying value of the object at that pixel. I chose not to go down this route though.</p>

<p>Instead, I chose to do it entirely on the CPU by performing the rendering calculations in reverse, in a process often known as <em>raycasting</em>. The rendering process involves taking each entity in your scene and multiply its coordinates by a <em>model matrix</em>, then a <em>view matrix</em> and then a <em>projection matrix</em>, transforming it into world space, then into camera space, and then into screen space. To figure out what object is at a pixel, I perform these operations in reverse by passing those pixel coordinates to the <em>inverted</em> perspective matrix and then to an <em>inverted</em> view matrix. This gives you the location of a point in
space corresponding to that point on the screen. If you draw a line from the location of the camera through that point, you have a <em>ray</em> into 3D space that is every point behind that pixel! The object picked is the object intersecting with that ray that is closest to the camera (I&rsquo;m just iterating through every object near the camera for now.)</p>

<p>For more information on this have a look at <a href="http://antongerdelan.net/opengl/raycasting.html">this article on raycasting</a>. I like this because it is purely algorithmic and doesn&rsquo;t require special shader code or anything.</p>

<h2>Qt Quick and OpenGL</h2>

<p>I continue to be happy with Qt &ndash; they are so active, they&rsquo;re always releasing interesting new tech. It is hard to catch them for feedback but it can be done and when they are on IRC they are very helpful.</p>

<p>Unfortunately the OpenGL support in Qt Quick is still in a great state of flux, so finding the correct way to use OpenGL ES was quite tricky. Turns out however that simply <em>not</em> specifying an OpenGL version, and using the default function pointers their <a href="http://qt-project.org/doc/qt-5/qopenglfunctions.html">utility library provides</a> is the proper way of using OpenGL ES in a portable fashion, even when your platform does not provide it (it falls back on the &lsquo;desktop&rsquo; 2.0 functions.)</p>

<h2>Up Next</h2>

<p>My representation of the world in the core code is still effectively 2D in that all entities have an <em>x</em> and a <em>y</em> but no altitude component. For rendering purposes that is extracted from the terrain service by the rendering engine for visual effect only. But if I am to allow jumping and have some notion of visual occlusion I will soon have to add a <em>z</em> component to the velocity and the position of each entity. This will also mean that the entity service will need to be dependent on the
terrain service.</p>

<p>I also want to implement a proper day/night cycle and some fancy controls in the GUI, like a slider that allows you to choose the time of day. This will hopefully provide a large ambiance improvement at little cost.</p>

<p>As far as blogging goes, last week I was intending my next post to be about my adventures in OpenGL and to provide a clear roadmap for others who want to follow the same path I took, but it is such a <em>huge</em> topic, and I am still not certain I have all the facts right, that I have put it off so far. We&rsquo;ll see how that goes&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week in review: Porting to Qt/QML with OpenGL]]></title>
    <link href="http://seshbot.com/blog/2014/05/16/week-in-review-c-plus-plus/"/>
    <updated>2014-05-16T00:56:26+00:00</updated>
    <id>http://seshbot.com/blog/2014/05/16/week-in-review-c-plus-plus</id>
    <content type="html"><![CDATA[<p><em>So I took a month holiday, and got out of the habit of writing blogs&hellip; hopefully this will break the dam, it&rsquo;s not like I don&rsquo;t have a billion things to write about</em></p>

<p><em>Initial version only! I will add pics soon</em></p>

<p>Over the last many weeks I have been ploughing through a whole lot of new stuff I&rsquo;ve never used before. As mentioned in my last post I decided to up the graphics a bit, but specifically I wanted to figure out a system for a extensible UI for menus and other 2D overlays, and 3D or pseudo-3D graphics. Creating a decent UI controls library I have learned is very difficult (if kind of fun to be honest.) Making something that is flexible enough to automatically layout your controls in a sensible way where everything resizes based on the
content contained within is a very difficult problem that nobody should have to re-solve in this day and age. So I wanted to re-use one that I also wanted to learn for myself.</p>

<p>In order to add these to my existing framework I took on the (it turns out) monumental task of learning OpenGL and integrating it with Qt/QtQuick/QML.</p>

<p>So far things are looking OK, but I have found the learning curve greater than I&rsquo;d originally anticipated &ndash; OpenGL in particular is a rabbit warren of deprecation and messy global state idioms. That said, I currently have:</p>

<ul>
<li>the UI menu/control system is entirely QML based and very simple to extend and use</li>
<li>the game terrain is constructed using <a href="http://www.volumesoffun.com/polyvox-about/">PolyVox</a> because I wanted to avoid having to figure out mesh generation along with all this other stuff</li>
<li>the OpenGL shaders incorporate basic lighting and not much else</li>
</ul>


<p>The main value I&rsquo;ve gained is a fairly decent understanding of what it takes to create modern OpenGL applications (though how useful that knowledge is in this day and age I am not sure.) I have not tried porting any of this across to Windows yet (I&rsquo;ve written it all in OSX) but hopefully the fact that I&rsquo;m using entirely cross-platform technologies will help a little there &ndash; though Windows is known to have very dodgy OpenGL support so I suspect that will be the cause of most of my porting
troubles.</p>

<!-- more -->


<h2>The Qt Stack</h2>

<p>I&rsquo;ve always been interested in <a href="http://qt-project.org/">Qt</a> &ndash; I don&rsquo;t know of any more highly polished user interface libraries for C++ out there, and they&rsquo;ve been producing really interesting technologies out that seem like they were created by people who actually understand C++. As a developer who opted to buy in to the Microsoft WPF UI framework, I find the QtQuick and QML libraries to be thoroughly refreshing and intuitive.</p>

<p>QML is a clean and simple markup language for writing user interfaces in a declarative fashion. The most apparent advantages over WPF for me were that the syntax is not XML based and that the property bindings may be declared in javascript, within which any properties are automatically dynamically bound so that property updates are detected and cascade automatically through the entire scene graph. In addition to that, the C++ to QML binding mechanism entirely leverages the Qt
metadata system that they&rsquo;ve tooled out and honed over the last more-than-a-decade, so everything just seems to work!</p>

<h3>QML basics</h3>

<p>Here&rsquo;s a simple QML example:</p>

<p>```javascript Simple QML example
import QtQuick 1.0</p>

<p>Rectangle {
   width: 200
   height: 200
   color: &ldquo;blue&rdquo;</p>

<p>   Image {</p>

<pre><code>  source: "pics/logo.png"
  anchors.centerIn: parent
</code></pre>

<p>   }
}
```</p>

<p>C++ QML components are essentially just regular C++ classes that use the Qt metadata system to expose properties, signals and slots &ndash; there really is no special QML magic required. These types are exposed to the QML engine through a single C++ commmand <code>qmlRegisterType&lt;MyCoolControl&gt;("com.seshbot", 1, 0, "CoolControl");</code>. This can then be consumed from within your QML by first <code>import com.seshbot 1.0</code> and then declaring your <code>CoolControl { }</code> just like the <code>Rectangle</code> in the above example.
All properties declared in the C++ class are immediately available from within QML &ndash; any changes made from the QML file will automatically call your setters, and any updates from within your C++ class will automatically propogate out to the QML file. MAGIC!</p>

<h3>QML with OpenGL</h3>

<p>As of Qt Quick 2.0, QML internally uses OpenGL to do all its own rendering so rendering your own OpenGL should theoretically not be too difficult. In fact, check out this <a href="https://www.youtube.com/watch?v=P4kv-AoAJ-Q">awesome demo</a> of a guy messing with an OpenGL shader in QML in real time. In the end however it took a few weeks to iron out, largely because this technology is pretty new and still has some kinks, and is not well documented yet (at least the stuff I wanted to do.)</p>

<p>There are three ways I know of putting your OpenGL content into a QML scene:</p>

<ul>
<li>create a custom Qt control that does all the OpenGL stuff internally and include that control in your <code>QtQuickView</code></li>
<li>extend <code>QtQuickView</code> and do the OpenGL stuff in its constructor</li>
<li>rendering your OpenGL to a frame buffer and having Qt inject that into its own layout. This is what <a href="http://advancingusability.wordpress.com/2013/03/30/how-to-integrate-ogre3d-into-a-qt5-qml-scene/">Ogre integration</a> does, but I haven&rsquo;t explored this</li>
</ul>


<p>There&rsquo;s not much difference between the two approaches &ndash; I went with the second because creating a control that is invoked from QML raises questions of how you inject your game state into the view. I wanted to just pass my game data into the constructor.</p>

<p>The Qt libraries come with an example called &lsquo;Scene Graph &ndash; OpenGL under QML&rsquo; that I found very helpful.</p>

<p>I did encounter a few problems:</p>

<ul>
<li>the QtQuick Controls library (which provides native-looking controls you can use in your QML files) don&rsquo;t seem to work with OpenGL versions older than OpenGL 4. After consulting the Qt guys on their IRC channel (#qt-quick on freenode) I <a href="https://bugreports.qt-project.org/browse/QTBUG-38817">filed a bug</a>, so hopefully it will be addressed in future versions.</li>
<li>my specialised QtQuickView class (that renders my game in the background under the QML stuff) didn&rsquo;t want to render any of my immediate mode OpenGL code &ndash; this is probably OK because immediate mode has been deprecated since version 1. (more on OpenGL versions and immediate mode and such in the future!)</li>
<li>all of the demos use older versions of OpenGL (probably to minimise compatability issues on Windows) so I had a bunch of surprises when I tried modernising it (basically had to learn each version of OpenGL as I progressed)</li>
</ul>


<p>The Qt quick guys are on the #qt-quick IRC channel around 9pm japan time by the looks, so that&rsquo;s generally the best time to get live help if you need it.</p>

<h2>OpenGL</h2>

<p>My god, OpenGL is a mess. Each version of OpenGL (there are 4) seemed to deprecate the old way of doing things and introduce entirely new idioms:</p>

<ul>
<li>OpenGL 1 was all about &lsquo;immediate mode&rsquo; because there were no shaders yet. You just tell OpenGL (in your C++ code) where the primitives and lights are and it takes care of all the rendering details</li>
<li>OpenGL 2 introduced the GLSL shader language for writing &lsquo;vertex&rsquo; and &lsquo;fragment&rsquo; shaders. This was a huge step forward in performance because you pipe all your vertex data into the graphics card in one go, but it meant that you have to do all the lighting and model/view/perspective transformations yourself in the shader. This makes it a lot harder to pick up for newbies.</li>
<li>OpenGL 3 totally messed with the GLSL syntax, and added the notion of vertex buffer objects (VBOs) which I found out are <em>mandatory</em> to use although nothing will warn you if you do not use them. Things just wont show up. Also there is a new type of shader &ndash; the &lsquo;geometry&rsquo; shader.</li>
<li>OpenGL 4 introduced the &lsquo;tessellation&rsquo; shader. I have no idea what that does yet as I have not started down the OpenGL 4 road.</li>
</ul>


<p>In addition to this, Windows only natively supports OpenGL 1, because they follow their whole DirectX thing. You can ask your users to upgrade their video drivers, or you can use an OpenGL &ndash;> DirectX translation layer to get around this problem (Qt apparently offers optional compatability via Googles <a href="https://code.google.com/p/angleproject/">ANGLE</a> library.)</p>

<p>Plus, any platform may support any number of &lsquo;extensions&rsquo; which provide capabilities on top of the &lsquo;core&rsquo; functionality offered by that OpenGL version. A good application will check the availability of all extensions they are using, which seems like a massive hassle to me at this point. Theres a library called the GL Extension Wrangler (GLEW) thats supposed to help with this, and Qt has its own set of helpers to ensure that youre only able to invoke functionality thats actually provided by
your chosen GL version.</p>

<p>Oh, there are also the &lsquo;embedded&rsquo; versions of OpenGL &ndash; OpenGL ES. These are apparently much smaller and well supported so I think I will migrate towards using some OpenGL ES version in the near future &ndash; probably OpenGL ES 2.0, which is supposed to be compatible with OpenGL 4.1 I believe.</p>

<p>In general I&rsquo;d say stay away from writing your own graphics drivers at this level &ndash; use higher level stuff that abstracts your OpenGL vs DirectX decisions from you. I went with OpenGL because I was suffering the delusion that it would make my experience with my QML layer simpler, but looking at the incompatabilities and weird differences between platforms I can see a lot of trouble in my future if I continue down this route.</p>

<p>I plan to write a more thorough map of the path I took through this so that hopefully others do not have to make the same mistakes I did.</p>

<h2>PolyVox voxel mesh generation</h2>

<p>I didn&rsquo;t want to also have to figure out how to generate meshes for my game at this point, so I decided to go with a library that allows the easy generation of voxel meshes.</p>

<p>PolyVox is actively being developed by a couple of pretty smart guys. A lot of it has the feel of a university thesis project, but it seems to work quite well, which is the most important thing. Most helpfully for me, they seem to be writing their examples using Qt in Windows and Linux, so I can learn from their mistakes with OpenGL on Windows (something I&rsquo;ll have to do soon.)</p>

<p>I plan to try generating some models in Blender and use something like <a href="http://assimp.sourceforge.net">AssImp</a> to import them into my game soon.</p>

<h2>General application design</h2>

<p>I really want to put my stuff on github but I&rsquo;m finding myself a bit recalcitrant on that front, because its still got so much half-baked experimental stuff in it. I will push myself to do it soon however because I&rsquo;d like to link to parts of the code when writing these blog posts.</p>

<p>It was somewhat satisfying to realise that all of the changes and work I&rsquo;ve done in the last couple of months has had no effect on the core modules I established for the 2D version of my game. All the terrain and entity management, along with the core module message passing mechanisms have remained the same.</p>

<p>I spent some time discovering an intuitive way to describe my 3D scene for rendering in OpenGL (i.e., for encapsulating all the OpenGL buffers, shader programs and shader program attribute bindings.) Of course this has been done many times before but OpenGLs &lsquo;stateless&rsquo; approach (or whatever they call having to bind your objects to global state) makes this a challenge.</p>

<p>The fundamental types in my scene description are:</p>

<ul>
<li><code>camera</code> encapsulates the perspective and view matrices (mapping world-space coordinates to pixels in the view). This has a <code>render()</code> method which tells the <code>scene</code> to render itself using this camera&rsquo;s view data</li>
<li><code>scene</code> contains all the entities and light data that may be rendered into the view, as well as the active shader program. The scene invokes each <code>entity</code>s <code>render()</code> method</li>
<li><code>entity</code> encapsulates a <code>model</code> that is to be rendered as well as the model matrix which maps the mesh from local &lsquo;model coordinates&rsquo; into the world coordinates, oriented the correct way and all that jazz</li>
<li><code>model</code> encapsulates all the buffers and VBOs required to render a mesh</li>
</ul>


<p>My system is also pretty dynamic &ndash; changes to the shader program files on disk immediately cause the application to re-compile and start using the new shader in the application, which helps speed things up on occasion.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week in Review: Making Games]]></title>
    <link href="http://seshbot.com/blog/2014/02/22/week-in-review-making-games/"/>
    <updated>2014-02-22T01:35:00+00:00</updated>
    <id>http://seshbot.com/blog/2014/02/22/week-in-review-making-games</id>
    <content type="html"><![CDATA[<p>I have once again bitten off a whole lot &ndash; I started making a game based on my fairly limited knowledge of how such things are done, and have found it very difficult to take a moment to distill my thoughts. In fact it has been nearly impossible as I have been constantly unsure of whether the approach I&rsquo;m taking is actually going to pay off in the long run!</p>

<p>This is just a catch-up on my experiences over the last few weeks, a few discoveries and surprises, and perhaps my plans for the immediate future. I decided at the last moment to include a screenshot here, but I&rsquo;m sure we&rsquo;ve all seen brown circles on green backgrounds before&hellip;</p>

<p><img src="/images/upload/2014-02-22-game-screenshot.png" title="&ldquo;This is a 100m section of a 10km world&rdquo;" ></p>

<p>I also created a (low framerate) <a href="/images/upload/2014-02-22-game-early.gif">animated gif</a> of this in action.</p>

<!-- more -->


<p></p>

<h2>Making a game/engine</h2>

<p>The general advice people give new game developers is to never make a game engine &ndash; focus on just getting your game concept out. I will largely be ignoring this advice because I don&rsquo;t have a specific idea for a game yet, just a general notion that it will be client/server and a kind of town-builder. Based on this alone I believe that careful work now will be necessary to ensure the scale of the world I have in mind will be possible &ndash; the virtual world will almost certainly need
geo-spatial partitioning to ensure location-based entity lookups and collision detections can be performed in decent time, and because only a small portion of the virtual world will likely be viewed, and likely only viewed in a separate client application altogether, there is no reason to have the core game logic mixed in with rendering logic at all.</p>

<h3>Modularity and the basic framework</h3>

<p>I intend to write a separate article on this, but first a quick rundown on my PCX library. I actually spent a lot of time trying to bring some of the nicer IOC container abstractions I&rsquo;ve grown used to in .Net and Java to my C++ environment. Breaking an application up into abstract services is a great way to ensure minimal coupling and well designed boundaries around modules of code. This usually involves a lot of reflection in newer languages. My solution in C++ involves run-time type identification (RTTI) which is generally considered anathema in C++, but it can facilitate the creation of libraries that deal in terms of interdependent types, and have nothing to do with the functionality of those types per se.</p>

<p>I decided on these core high-level abstractions:</p>

<ul>
<li><em>services</em> are the core contracts that different sections of code use to communicate with each other. If you want to work with the weather, get yourself a hold of the weather service</li>
<li><em>commands</em> are messages sent into the application as a whole from outside &ndash; services can advertise which commands they can respond to, and the client application can bind keys or whatever to these commands. This abstraction is probably more focused on games</li>
<li><em>modules</em> provide concrete implementations of a bunch of specifically configured services and expose commands. The application mainline only interacts with modules &ndash; it starts them up and shuts them down, and the modules provide all the functionality of the application</li>
<li><em>message bus</em> provides singleton channels for application-wide cross-cutting concerns. I have not yet found a particular use for this, but intend to use it for sending &lsquo;hints&rsquo; out that have no true affect on the state of the application, such as <em>dump debug information now</em>.</li>
</ul>


<p>The central idea is that different abstract concepts such as geography, creature behaviour, economy, weather, client UI etc are all provided by separate modules. When started up, a module can publish services they provide and consume services provided by other modules via a &lsquo;service locator&rsquo;. It is very important that the &lsquo;service locator&rsquo; is only used by the high-level module code directly to ensure they&rsquo;re not used to hide globals and introduce crazy interdependencies. The module creation
mechanism provides a fluid dependency syntax that ensure each module is initialised after the modules on which it depends (i.e., publishes services which this module consumes.)</p>

<p>I created a core library (I named <code>pcx</code> after my own initials and the letter &lsquo;x&rsquo; which is super cool) that I intend to be useful as a general-purpose C++ library for anyone wanting to add these concepts to their own application.</p>

<h3>Deciding on core abstractions</h3>

<p>I&rsquo;ve been thinking about making a game for a long long time now, and have had a myriad of thoughts on how I would create all the major abstractions, modularise the code, and manage multiple clients, network latency, sharding, etc. But when I actually sat down and put hands to keyboard, the first problems I ran into were hugely and unexpectedly daunting &ndash; how should position and rotation be stored? And time? Should position be a vector of floating point numbers or integers? And
should velocity be another vector, or polar coordinates (rotation and magnitude). Should rotation be implicit from velocity, or should entities be able to face one direction but move in another?</p>

<p>These are all decisions that will affect the application in almost every way, and doubtless create deep-seeded performance and functionality trade-offs, and as this is my first game I wasn&rsquo;t really sure what those might be. For example, if I choose to represent velocity as a vector (x, y components), then I lose the ability to determine the direction a stationary unit is facing ([0,0] gives no information in that aspect). Polar coordinates do not suffer this problem however. But the
calculation for moving an entity with cartesian vector velocities is so trivial! Just <code>newPos = pos + velocity * time</code>&hellip; It&rsquo;s very tempting to go with that!</p>

<p>And if I store latitude/longitude of an entity as floating point numbers, I expect I might run into rounding problems with entities far from the origin point. Or when comparing entities close to the origin with those far from the origin. But floating point numbers allow me to say &lsquo;all distances are in meters&rsquo; which makes thinking about and configuring the application that much easier for me.</p>

<p>In the end I kind of arbitrarily chose to store locations and velocities as vectors of doubles, and will probably store a &lsquo;facing direction&rsquo; as a float in radians. Real-time time is likewise a double, indicating fractions of a second. I have not yet implemented any concept of in-game time however.</p>

<h3>Discovering engine capabilities</h3>

<p>I quickly found it very important to keep a close eye on the performance impact of all my decisions as well. It was quite exciting to get my original simple framework up (a &lsquo;world&rsquo; module that holds all the entities and their locations/momentums in the game) and determine the maximum number of visible entities it could support. I found it started dropping frames at around 40,000 moving entities in the world, but I quickly realised however that I have no idea what a good number is &ndash; how many entities <em>should</em> it be able to support?</p>

<p>Most engines I&rsquo;ve looked at (e.g., Quake and Source engines) suport the low 1000&rsquo;s of entities, but most of those are client-only frameworks. I couldn&rsquo;t find a lot of info on MMOs (not that I&rsquo;m making an MMO but I would like to get a feel for scale), and could only find indirect references to EVE online supporting <a href="http://www.gamasutra.com/view/feature/132563/infinite_space_an_argument_for_.php?page=2">up to 30K entities in some of their major battles</a>, but they apparently do all sorts of crazy stuff to support that such as slowing down time and moving entities not directly involved out onto other shards.</p>

<p>In the end it&rsquo;s all moot however, as my game is still very trivially implemented and is not a real-world example of how it will eventually work. For one, all moving entities in the world just walk in an anti-clockwise circle and don&rsquo;t look at the world around them (this will add a lot of complexity to say the least!). Secondly, the game currently updates every entity in the game 60 times per second. I should definitely make entities further from the player &lsquo;stupider&rsquo; and less
frequently updated, and there is actually no good reason to update all entities 60 times per second anyway &ndash; that number was chosen because that is the framerate of the GUI and I have currently tightly bound the world update logic to the core game loop. I will be decoupling these soon.</p>

<p>I have found it&rsquo;s very interesting to keep a good feel for the performance of the application as I work on its foundation &ndash; every time I make a significant modification I run it with varying conditions and check how it performs relative to previous iterations. This has led to some interesting discoveries regarding performance of iterators and iterator adapters, and some very puzzling edge-cases where the Clang optimiser seems to suddenly start borking. But more on that some other time.</p>

<p>The &lsquo;modules&rsquo; abstraction is really helpful in monitoring performance &ndash; the core game loop just iterates over each module, effectively saying <code>for each module m, m.update(timeSinceLastUpdate)</code>. I put a basic metrics counter around this tight loop and get some pretty useful output that shows how many milliseconds each module consumes per tick:</p>

<p><code>bash Stats are dumped to standard output ever second
Job time accumulations in 1000ms:
 -               client - 60 ticks, avg: 0ms max: 0 total: 0ms (0%)
 -                 mobs - 60 ticks, avg: 0ms max: 3 total: 9ms (27%)
 -                props - 60 ticks, avg: 0ms max: 0 total: 0ms (0%)
 -                world - 60 ticks, avg: 0ms max: 0 total: 23ms (72%)
 -      render entities - 58 ticks, avg: 5ms max: 8 total: 339ms
 -   update all modules - 58 ticks, avg: 0ms max: 3 total: 33ms
</code></p>

<p>From this output it is obvious that the &lsquo;render entities&rsquo; step is taking a long time &ndash; I should really investigate this!</p>

<h3>C++ development experiences</h3>

<p>Regarding the choice of C++ as a language, it is sometimes a boon and often times a bane. The absolute major pain I&rsquo;m trying to avoid is massive compile and link times. These can only be mitigated through careful control of modularity and inter-dependencies. This is something one should struggle to achieve in any case, but it is constantly undermined by the use of templates and libraries that use templates.</p>

<p>And the Eigen C++ matrix library seemed like a good choice, but it comes with a harrying legacy &ndash; it prefers to use special high-performance instruction sets available on some machines that require your objects to be defined in a certain way (with special alignment specifications when memory is allocated.) These are known as <a href="http://eigen.tuxfamily.org/dox-devel/group__TopicFixedSizeVectorizable.html">fixed-sized vectorisable</a> types and can cause segmentation faults if used incorrectly. Fixed-size vectorisable types cannot be passed by-value to functions or methods, and all classes that contain
such types must themselves specially override the <em>new</em> operator to ensure these alignment requirements are maintained. And STL classes that contain these types must take this into account, so Eigen provides its own implementation of the STL vector that you must use. PLUS all of these restrictions apply to types that you create that have eigen members, and I think also to classes that aggregate THOSE types! It is a huge pain in the ass if you like creating abstract interfaces, to say the least.</p>

<p>I suspect that Eigen will cause all sorts of problems when I move to Windows, so I want to try that out sooner rather than later. The special vectorisation can be disable at compile time but I&rsquo;d rather see if it causes problems first.</p>

<h2>Qt Creator and CMake</h2>

<p>I was originally going to go with XCode for development on OSX &ndash; I&rsquo;d really love to learn how to use that well as it seems quite different to most other editors and not intuitive for me. Ultimately however I decided against it because it doesn&rsquo;t work well with CMake (I think I would have to constantly be re-loading the project) and, at the time anyway, I was thinking that I really wanted to work with QT Quick and other Qt technologies.</p>

<p>So I decided to go with Qt Creator as a development IDE. It is certainly a huge pleasure to use, and has more than the usual amount of high-level functionality one would expect in a C++ development environment. As a bonus it has fairly decent integration with CMake &ndash; the only missing aspect here is that it doesn&rsquo;t allow you to easily add files to your CMake project, but I have made a few tools that allow me to do this easly from the command prompt (more below.)</p>

<p>The main problem I&rsquo;ve had so far is that in order to use the latest C++11 functionality I went with Clang over GCC as a compiler. While Qt Creator supports this, it still seems to try to use the GDB and GProf etc for debugging and profiling, which don&rsquo;t work with Clang. I am going to spend some time soon figuring out how to fix this, but it seems to involve creating a new &lsquo;kit&rsquo; that defines which dev tools the IDE should invoke. It seems complicated however&hellip;</p>

<h2>OSX Development</h2>

<p>I really enjoy working on OSX &ndash; it has all the goodness of a good linux development environment along with some really smooth apps.</p>

<p>One of the worst aspects of Windows development is the extremely weak command line environment. The history of the command line shell (MS-DOS prompt) still seems mired in its QDOS (Quick and Dirty Operating System) origins from the very early &lsquo;80s. While it supports basic pipes and has a few commands like <code>find</code> and&hellip; erm&hellip; anyway, while it has some limited functionality available, it is not a scratch on the highly evolved GNU/Linux environment that has been continually improved over
the last 30 years or so. If you want a tool that does anything moderately complex in Windows you need to find one on the internet generally, whereas in Linux there is no limit to what can be accomplished with <code>sed</code>, <code>grep</code>, <code>find</code>, <code>cut</code>, <code>awk</code>, <code>tr</code> and the like.</p>

<p>For instance, one real annoying aspect of C++ development for me has always been the relative difficulty of creating new projects. Java IDEs can easily provide the ability to create new projects and packages through a simple right-click in your project tree, because Java is very opinionated about where such files go. C++ just requires the symbols to <em>exist</em> at link time, so they could come from anywhere, and there are limitless conventions about how to manage header files in your filesystem.</p>

<p>I have my own conventions for managing my hierarchy of source and header files, and decided to create template projects and modules (my own abstraction for this project) and create shell scripts that allow me to set up entirely new projects with a simple <code>x.new-module thing Thing</code>, which will create all the necessary headers, source files and CMake files, with default sensible names and namespaces, and include them into my current project. This would have been a nightmare to put together
in Windows but has been trivial in OSX.</p>

<h2>Next steps</h2>

<p>I recently added the all-important geo-spatial partitioning in a very simple way, but this seemed to cause some significant performance penalties. I have decided to take the plunge and figure out how to get the profiler working properly with Qt Creator to help me investigate this, because working on a large project without a profiler is like driving a car with a map but no windows &ndash; it&rsquo;s hard to tell if you&rsquo;re still on the road.</p>

<p>I really want to get some graphics in there but I have no experience with that, so am considering messing around with shaders to see if I can get a good lighting model in there first. This should really help me figure out the environmental aesthetic I&rsquo;m going for.</p>

<p>At some stage I&rsquo;ll need to figure out how I&rsquo;m going to make the game overlays such as menus, dialogs, text boxes etc. Previously I&rsquo;ve used SFGUI (works well with SFML which is the C++ GUI library I&rsquo;m using) but I would like to see if I can get QT Quick and QML working with SFML. I don&rsquo;t want to spend too long on this however because I intend to move the GUI code to perhaps another language (C# and Unity) so effort spent on the GUI might be ultimately wasted.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Week in Review: Pausing Web App, Starting C++ App]]></title>
    <link href="http://seshbot.com/blog/2014/02/02/week-in-review-pausing-web-app/"/>
    <updated>2014-02-02T22:52:52+00:00</updated>
    <id>http://seshbot.com/blog/2014/02/02/week-in-review-pausing-web-app</id>
    <content type="html"><![CDATA[<p>Just over a week ago I decided to put down my web tools for a while and move to working in an environment in which I&rsquo;m much more comfortable &ndash; C++. I will definitely pick up the &lsquo;Table Top&rsquo; app (or whatever it turns into) again soon but I felt the need to do work that resulted in a more <em>tangible</em> product.</p>

<p>Over the last few weeks I&rsquo;ve had a growing realisation that the foundation of web programming is still immature, and I am doubting the value in investing too much time learning the high-level technologies. I am not really one for learning frameworks in general actually &ndash; I much prefer learning languages and idioms &ndash; and modern web programming is all about rapidly changing high-level frameworks.</p>

<p>That said however, I feel that I&rsquo;m finally at a point where I can start making useful stuff in Ember and Rails without feeling like I&rsquo;m misusing the tools or spending most of my time in Google. So last week I knocked off a few high-level features in my app to show the basic scaffolding I was considering (it only took a few hours in the end!), and then set it aside.</p>

<p><img class="center" src="/images/upload/2014-02-03-seshbot-framework.png" title="&ldquo;Game Table App as of Feb 2014 &ndash; still doesn&rsquo;t do much&rdquo;" ></p>

<p>There is a very duct-tape and chicken-wire feel to web technologies, but once you&rsquo;re familiar with the tech you can pump stuff out pretty quickly. Because of the immediate and ethereal nature of the web it can be a fantastic way of creating a product that is immediately globally available. All of the magic we see however is still largely magic however, and magic doesn&rsquo;t bode well in any application. The web as a platform for applications is still unbaked and young, and I feel that unless you&rsquo;re forging new territory on the frontier you&rsquo;re probably working with technologies that won&rsquo;t be interesting in a few years time.</p>

<!-- more -->


<h2>The Web as a Software Platform</h2>

<p>HTTP, HTML, JavaScript and CSS have been around for a while now, so why have all the useful standards for building proper web applications (like WebGL, WebSockets, local storage, drag-and-drop and all those other HTML5 goodies) only started coming along recently?</p>

<p>It turns out that for a long time web standards were committee-driven by a group of beard-stroking high-falutin non-visionaries called W3C. I still recall fairly recent times when the latest advances in the web were all about creating HTML that was also standards-conforming XML for some reason (so that perhaps machines could deal with it more easily or something?) and very little practical advancement was being made. (Side note: the same thing seems to be happening with OAuth, which is a morass of unproven ideas and conflicting ideals.)</p>

<p>At some stage however another working group arose called <a href="http://en.wikipedia.org/wiki/WHATWG">WHATWG</a>, formed of people that were actually interested in pushing practical new technologies onto the web, and they pretty much ignored the W3C&rsquo;s direction.</p>

<p>The WHATWG formed in 2004 in response to the stagnating web standards, and in 2007 the W3C finally got on board and standardised HTML5 based on a whole bunch of the WHATWG&rsquo;s tools. They pretty much totally abandoned their whole XHTML thing, which I don&rsquo;t think anyone really regrets.</p>

<p>All of a sudden there have been bursts of innovation on the web, but without a fully baked platform on which to create them. So all these high-level frameworks have temporarily filled the gaps while the HTML spec catches up. In fact, Google&rsquo;s Angular framework (an alternative to Ember.js) has the explicit goal of becoming obsolete when Google manages to get their tools into the standard &ndash; it&rsquo;s a kind of proof-of-concept of Google&rsquo;s vision for client-side application development.</p>

<p>I chose Ember because if you&rsquo;re going with a framework, you might as well go with one that provides abstractions that make sense to you. But I don&rsquo;t have high hopes for it&rsquo;s long-term availability as the web matures, and so feel that there is limited long-term value in becoming some kind of Ember guru.</p>

<h2>My Web App</h2>

<p>The current proof of concept is at <a href="http://seshbot.herokuapp.com.">http://seshbot.herokuapp.com.</a> It still doesn&rsquo;t have the meat in it but it has the authentication, some mobile-friendliness, and sorta models the notions of &lsquo;games&rsquo; and &lsquo;players&rsquo; in games.</p>

<p>I was much surprised to find out that there is not much of a story yet for how to provide a real-time connection between the backend and the Ember application, where updates on the server are actively pushed out to the client. This is probably the next big thing I&rsquo;ll have to do &ndash; create an adapter that connects to the server (probably using server-side events and one of the <a href="http://www.sitepoint.com/streaming-with-rails-4/">Rails4 streaming APIs</a>) and injects incoming updates into the model using the Ember Data API, similar to the <a href="https://github.com/thomasboyt/ember-firebase-adapter">EmberFire Firebase library</a>.</p>

<p>Other than that, the two remaining things I can think of are: making it look like a gaming application (nice rose-wood tabletop look or something?) and adding a few components that I want to have in there like a chat client, a dice area and some kind of card game. This is the nice bit where I get to play around with things, I&rsquo;m looking forward to experimenting with the interactivity side of things, perhaps dragging cards around or having some sound built into it.</p>

<p>I have put this aside however because I don&rsquo;t want to burn out on it. I think it&rsquo;s time to take a break so that I can come back with a fresh set of eyes &ndash; perhaps I&rsquo;ll decide it&rsquo;s not worth continuing at all in lieu of some other app.</p>

<h2>New C++ App</h2>

<p>I&rsquo;ve been wanting to mess around with C++11 for a long time now, and have made a lot of little sample applications that allow me to get a feel for it. I really want to try creating a real application that is:</p>

<ul>
<li>cross platform</li>
<li>uses built-in C++11 stuff like chrono, threads, lambdas, auto etc</li>
<li>provides a few services I&rsquo;ve come to enjoy in newer languages such as dependency containers (if feasible!)</li>
<li>allows me to experiment with GL shaders, which I&rsquo;ve wanted to play with for <em>years</em>.</li>
</ul>


<p>So I spent a few days writing a basic app in <a href="https://qt-project.org/wiki/Category:Tools::QtCreator">QT Creator</a> using <a href="http://www.cmake.org/">CMake</a> as the build system. There were a few hurdles but it didn&rsquo;t take long to get up and running. Because I&rsquo;m limiting myself to core C++, boost and a couple of cross-platform libraries (<a href="http://www.sfml-dev.org/">SFML</a> for graphics and <a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a> for linear algebra stuff) it&rsquo;s still pretty versatile. And because I&rsquo;m using CMake I&rsquo;ll be able to use Visual Studio to develop in Windows and QT Creator or XCode or whatever I want in OSX. I&rsquo;ll try to stick with QT Creator where possible though for consistency.</p>

<p><img class="center" src="/images/upload/2014-02-03-qtcreator.png" title="&ldquo;QT Creator actually looks pretty nice&rdquo;" ></p>

<p>I am a bit worried about Windows compatability &ndash; Visual C++ has always lagged behind in standards conformance, but they have picked up their pace somewhat in the recent future. I am avoiding some of the more esoteric stuff however, such as variadic templates, because of VC++.</p>

<p>I would also really like to try messing around with QML &ndash; Qt&rsquo;s DSL for writing GUI applications. It reminds me of WPF only in a much cleaner, less hacky way, with JavaScript capabilities built straight into it. Ideally I will figure out a way to use Qt Quick/QML seamlessly with the OpenGL stuff provided by SFML, though I am less optimistic about that. Previous experience tells me that you don&rsquo;t want to be re-creating GUI widget libraries because layout management is a complete bitch, but I think QML is still a bit young to work in arbitrary circumstances.</p>

<h2>Blogging</h2>

<p>I found it very difficult to blog about my experiences with Ember and Rails. There is a lot of stuff out there covering the same stuff I would cover, only terribly out of date. This made me feel that my posts too would just become so much flotsam on a sea of irrelevant minutiae.</p>

<p>The main value I was really getting though was as a reference for myself so I could close some of my browser tabs without worrying that I wouldn&rsquo;t be able to find that one piece of information again, and also so that I could distill my thoughts on something before putting it aside.</p>

<p>I have about 3 unpublished posts on my experience over the last few weeks &ndash; I&rsquo;ll probably put them together under one post about Ember development, but not for a little while now I&rsquo;m guessing.</p>

<p>I am much more certain of my opinion on C++ related matters, so I imagine that there will be a few long rants in that general direction coming up.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[This week in review: my game table web app]]></title>
    <link href="http://seshbot.com/blog/2014/01/11/this-week-in-review-the-game-table-web-app/"/>
    <updated>2014-01-11T02:19:08+00:00</updated>
    <id>http://seshbot.com/blog/2014/01/11/this-week-in-review-the-game-table-web-app</id>
    <content type="html"><![CDATA[<p>First here&rsquo;s a quick summary of what I got up to:</p>

<ol>
<li>trying to build a simple &lsquo;gaming table&rsquo; application in Ember.js,</li>
<li>styling with Twitter bootstrap,</li>
<li>messing with plugins in my blog (trying unsuccessfully to fix code highlighting, and adding a UML tool &ndash; see below)</li>
</ol>


<p><center><img src='/images/plantuml/00178544eeee1acd089c0ec4883b3611.png'></center></p>

<p>I spent most of my time learning about Ember. <a href="http://emberjs.com">Ember.js</a> is a very nice looking front-end MVC framework that has a very appealing <a href="http://emberjs.com/guides/">getting started guide</a> that make it look <em>super simple</em> to create a reactive application. Three things that people will not tell you however:</p>

<ul>
<li>demo videos only ever show the main usage scenario of that framework</li>
<li>most new frameworks change so often that they&rsquo;re either unstable or very little up-to-date documentation exists, and</li>
<li>many of the benefits they offer you probably won&rsquo;t end up using anyway, for various reasons</li>
</ul>


<p>For now though I&rsquo;ll go ahead with it because I feel that I&rsquo;m just about to start doing cool stuff in it (it kinda always feels like this though.)</p>

<p><strong>Next week</strong> I&rsquo;m thinking of switching back to some C++ stuff so I can dabble in a realm I&rsquo;m more comfortable with for a while&hellip; Monday is a public holiday in Japan though so I&rsquo;ll probably be wandering around and not programming much.</p>

<!-- more -->


<h3>Problem 1: binding non-nested components was difficult</h3>

<p>I figured I would devote my first day last week to creating the framework for a small Gaming Table application. Perhaps just start off with a quick chat client or sketching app. I was not accounting however for the vagaries of modern web application development, and I ended up messing around with stupid little problems for most of the week. Looking back I feel it was quite frustrating overall &ndash; it seems that many of these new techs do not quite work as advertised, if at all.</p>

<p>Most tutorials and documentation will usually only tell you about one way to make an ember app &ndash; showing the details of a single entity or collection of entities of the same type at a time. Perhaps it might be some blogging application that lets you dig down into various blog entries, or perhaps it will involve showing all the tweets from a particular tweeter. Whatever the demo, I&rsquo;m sure it will show you how to explore <em>a single concept</em>.</p>

<p>The first thing I wanted to do was to show your online friends on the left side and allow you to create or enter an existing chat room. I immediately got stuck on a stupid little problem however that I stubbornly refused to get past, leading to several wasted days.</p>

<p>My specific problem was <em>how can I make the nav bar show the name of the current gaming table (kind of like a chat room), but show some placeholder message if I&rsquo;m not in a room</em>. The problem being that the region dedicated to showing information about the current table (players, cards etc) is not a descendent hierarchically of the nav bar.</p>

<p><center><img src='/images/plantuml/09385b523a9258b9f2b64d6596a93d8e.png'></center></p>

<p>Long story short, the correct way seems to involve: 1) modifying the &lsquo;Nav Bar&rsquo; controller to add a dependency to the &lsquo;Game Table&rsquo; controller; 2) add to the Nav Bar controller an alias or dynamic property pointing to the Game Table controller (this is conceptually the last table loaded); and 3) creating another dynamic property in the Nav Bar controller that is updated whenever <code>currentPath</code> is updated, and returns <code>null</code> if the route (<code>currentRouteName</code>) is no longer a table.</p>

<p>This might make sense, but it was a pain in the ass to discover. (Side note: I&rsquo;m working on a general &lsquo;getting to know Ember.js&rsquo; post that goes into a lot more detail on this so others tackling the same problem might not have to spend as long as I spent on it.)</p>

<p>Surround your pullquote like this {" text to be quoted "}</p>

<p>I&rsquo;m concerned that the Ember docs might not cover enough real world scenarios that &lsquo;proper&rsquo; applications might encounter (e.g., several regions dedicated to different information.)</p>

<h3>Live Help in IRC! 1980&rsquo;s tech to the rescue</h3>

<p>The IRC channel is pretty awesome &ndash; the #emberjs channel of freenode.org is one of the most populated channels on the server, and I&rsquo;ve saved a lot of time by asking for help there.</p>

<p>I spent a long time digging through documentation on how to solve this problem before I turned to IRC. Then within 10 minutes I had someone giving me meaningful advice that I ended up using. The secret was that I went in there with a minimalistic example of my problem that they could mark up and fix for me. <a href="http://jsbin.com/UzaFUZE/1/edit?html,js,output">Here&rsquo;s</a> the code I gave them and <a href="http://jsbin.com/UzaFUZE/4/edit?html,js,output">here&rsquo;s</a> what they gave me.</p>

<h3>Hosting a backend</h3>

<p>I have been mainly concentrating on the front end functionality so far, so didn&rsquo;t want to spend too long messing around with the server side. I had originally decided that I&rsquo;d learn some rails, but decided to try out a &lsquo;no backend&rsquo; solution &ndash; in this case <a href="http://deployd.com">deployd</a>. The two criteria I was after were a simple REST API and some kind of authentication, both of which deployd ostensibly offers. There were a few hiccups though.</p>

<p>The first was that deployd is still actively being developed, so the web UI isn&rsquo;t totally intuative. I won&rsquo;t go too far into it but it has been a hassle.</p>

<p>The next problem is that although both Ember and Deployd declare that they speak standard REST JSON language, it turns out they don&rsquo;t agree on how that language should look. I had to mess around a fair amount and ask around on IRC before discovering that you need to apply your own serializer, that intercepts all remote data transfers and allows you to &lsquo;munge&rsquo; it a little into a format that Ember is happy with.</p>

<p>Again, I&rsquo;ll include the details of all this in a post dedicated to Ember later.</p>
]]></content>
  </entry>
  
</feed>
